<!DOCTYPE HTML>
<!--
	TXT by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>TCP多线程简易聊天室</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<div class="logo container">
						<div>
							<h1><a href="index.html" id="logo">TCP</a></h1>
							<p>聊天室</p>
						</div>
					</div>
				</header>

				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li class="current"><a href="../index.html">Home</a></li>
						<li>
							<a href="#">Project</a>
							<ul>
								<li><a href="energy-conservation.html">节能减排竞赛</a></li>
								<li><a href="Epidemic prediction system.html">软件杯</a></li>
								<li>
									<a href="#">课程设计</a>
									<ul>
										<li><a href="Plane Wars.html">飞机大战</a></li>
										<li><a href="thermistor.html">热敏电阻传感器</a></li>
										<li><a href="TCP.html">TCP多线程简易聊天室</a></li>
										<li><a href="Iot awareness.html">物联网感知实习</a></li>
										<li><a href="database.html">数据库设计</a></li>
										<li><a href="Robert.html">智能小车自主驾驶</a></li>
										<li><a href="STM32-ZigBee.html">基于STM32和ZigBee的智能控锁系统</a></li>
									</ul>
								</li>
								<li>
									<a href="#">建模比赛</a>
									<ul>
										<li><a href="#">国赛</a></li>
										<li><a href="#">美赛</a></li>
										<li><a href="#">Mathorcup</a></li>
										<li><a href="#">电工杯</a></li>
										<li><a href="#">亚太</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li>
							<a href="#">Study</a>
							<ul>
								<li>
									<a href="#">蓝桥杯</a>
									<ul>
										<li><a href="#">c/c++组</a></li>
										<li><a href="#">嵌入式组</a></li>
									</ul>
								</li>
								<li>
									<a href="#">课程小结</a>
									<ul>
										<li><a href="../class/computer composition principle.html">计算机组成原理</a></li>
										<li><a href="../class/operating system.html">操作系统</a></li>
										<li><a href="../class/data structure.html">数据结构</a></li>
										<li><a href="../class/computer network.html">计算机网络</a></li>
										<li><a href="../class/database.html">数据库</a></li>
										<li><a href="../class/Machine Learning.html">机器学习</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li><a href="#">科研成果</a></li>
					</ul>
				</nav>

			<!-- Main -->
				<section id="main">
					<div class="container">
						<div class="row">
							<div class="col-12">
								<div class="content">

									<!-- Content -->

										<article class="box page-content">

											<header>
												<h2>TCP多线程简易聊天室</h2>
												<ul class="meta">
													<li class="icon fa-clock">2020.5.11</li>
												</ul>
											</header>

											<section>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;聊天室软件的总体目标：在QT5的开发环境下，利用所学C/C++语言和QT的相关知识，开发一个具有良好人机界面的聊天室软件，实现多客户端进行聊天，并能进行一些基本操作，同时还能显示人员离线，从而达到教学的目的。
												</dt>
												</dl>
											</section>

											<section>
												<h3>基本功能</h3>
												<dl>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（1）界面友好，易与操作。模仿我们常用聊天软件，易于操作
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（2）实现基本多客户端聊天。能够接收不同用户的用户名及聊天内
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（3）更改字体及颜色。能够更改发送内容的字体和颜色
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（4）保存和清除聊天内容。能够将聊天内容保存至本地，也可以直接清屏
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（5）显示人员离线。当聊天室内有用户离开时，其他在线用户能够知晓
												</dt>
												</dl>
											</section>

											<section>
												<h3>各模块的功能描述</h3>
												<dl>
												<dt><b>服务器端模块</b></dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;1.聊天服务模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是实现基础TCP连接，通过创建线程处理新的连接，同时处理来自客户端信息
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;2.客户端多线程处理模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是通过重写run()函数，实现创建和配置新的套接字，实现服务器端连接客户端功能，
													其同时能够获取连接到服务器的地址和用户名，并进行记录
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;3.TCP套接字模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是写入数据。
												</dt>
												<dt><b>客户端模块</b></dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;1.服务连接模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是与服务器进行连接或断开。通过输入用户名并连接至localhost实现
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;2.信息模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是发送聊天内容，并在上面文本框中显示发送的用户名以及聊天内容，实现了聊天的基本操作
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;3.扩展功能模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是实现一些常用的功能，比如更改发送内容中字体的样式、颜色等，还有保存聊天记录以及清屏功能
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;4.图形界面子模块
												</dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本模块的主要功能是设计聊天室界面，通过QT自带的设计器以及相关控件，实现UI界面
												</dt>
												</dl>
											</section>

											<section>
												<h3>详细设计说明</h3>
												<dl>
												<dt><b>模块调用图</b></dt>
												<dt align="center"><img src="images/TCP-1.jpg"></dt>
												<dt><b>服务器端模块</b></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.聊天服务模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												通过start()函数显示监听端口是否成功。通过重写QTcpServer的incomingConnection()函数去实现tcpsocket连接的建立和分配，
												在这个函数中创建新线程以处理客户端的新连接。利用on_messageFromClient()函数处理客户端聊天。通过on_threadFinished()函数显示客户离开并将线程关掉。
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.客户端多线程处理模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												本模块最重要的就是对run()函数的重写。run()是线程的入口，run的开始和接收意味着线程的开始和结束，在这个函数里创建和配置新套接字并连接到信号和槽。当一个线程连接上来时，需要调用readyRead()函数，读取数据并给予主线程信号。
												当客户端断开连接时，调用disconnected()函数删除套接字并终止此线程
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.TCP套接字模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												本模块的主要是一个信号槽函数on_messageToSocket用来写入数据
												</dt>
												<dt><b>客户端模块</b></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.1.服务连接模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												通过一个槽函数on_btn_connect_clicked()，如果on_connected()函数的判断，若未连接的话，创建套接字并连接，在这里我们设置连接到localhost，通过不同用户名进行区别。
												同时，为了便利，设置了键盘敲击响应事件keyPressEvent()，通过敲击回车一样实现此效果
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.信息模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												本模块同样通过一个槽函数on_btn_send_clicked()，将文本框的内容发送。并结合on_readyRead()函数，实现聊天内容的发送	
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.扩展功能模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												通过槽函数on_fontComboBox_currentFontChanged(),实现更改字体样式；通过on_colorToolBtn_clicked()实现字体颜色更改；通过on_saveToolBtn_clicked()调用saveFile()函数来保存聊天记录；
												通过on_clearToolBtn_clicked()函数实现清屏功能。这些属于一些扩展功能，相对比较好实现
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.图形界面子模块
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												本模块的主要功能是设计聊天室界面，通过QT自带的设计器以及相关控件，实现UI界面，包括Tool Button、Push Button等的使用，相对使代码简化，且界面良好
												</dt>
												<dt><b>服务器端流程图</b></dt>
												<dt align="center"><img src="images/TCP-2.jpg"></dt>
												<dt><b>客户端流程图</b></dt>
												<dt align="center"><img src="images/TCP-3.jpg"></dt>
												</dl>
											</section>

											<section>
												<h3>系统实现</h3>
												<dl>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们首先需要打开服务器,来为客户端进行服务
												</dt>
												<dt align="center"><img src="images/TCP-4.png"></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;开启客户端，输入用户名连接到localhost
												</dt>
												<dt align="center"><img src="images/TCP-5.png"></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以同时连接多个客户端
												</dt>
												<dt align="center"><img src="images/TCP-6.png"></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;多个客户端可以进行聊天，其中，聊天字体样式、颜色可选
												</dt>
												<dt align="center"><img src="images/TCP-7.png"></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户可以保存聊天记录
												</dt>
												<dt align="center"><img src="images/TCP-8.png"></dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在本地，我们看到了保存的聊天记录
												</dt>
												<dt align="center"><img src="images/TCP-9.png"></dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt align="center"><img src="images/TCP-10.png"></dt>
												<dt>
													&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt align="center"><img src="images/TCP-11.png"></dt>

												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												</dl>
											</section>

											<section>
												<h3>详细设计说明</h3>
												<dl>
												<dt><b>模块调用图</b></dt>
												<dt align="center"><img src="images/TCP-1.jpg"></dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												<dt>
												&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
												</dt>
												</dl>
											</section>

										</article>

								</div>
							</div>
							<div class="col-12">

								<!-- Features -->
									<section class="box features">
										<h2 class="major"><span>Thank you for your reading</span></h2>
									</section>

							</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
				<footer id="footer">
					<div class="container">
						<div class="row gtr-200">
							<div class="col-12">
								<!-- Contact -->
									<section>
										<h2 class="major"><span>More</span></h2>
										<ul class="contact">
											<li><a href="https://blog.csdn.net/weixin_43476037"><img src="images/csdn.jpg" alt=""><span class="label"></span></a></li>
										</ul>
									</section>

							</div>
						</div>

						<!-- Copyright -->
							<div id="copyright">
								<ul class="menu">
									<li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
								</ul>
							</div>

					</div>
				</footer>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>